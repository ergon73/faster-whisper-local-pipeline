# Faster-Whisper Local Pipeline

–õ–æ–∫–∞–ª—å–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω –Ω–∞ –±–∞–∑–µ `faster-whisper`, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∞—É–¥–∏–æ –∏–∑ –≤–∏–¥–µ–æ, –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –µ–≥–æ –≤ –ø—Ä–∏–≥–æ–¥–Ω—ã–π –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç—ã. –°–∫—Ä–∏–ø—Ç —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –Ω–∞ Windows/macOS/Linux, –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ–ª–∞–π–Ω –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏ –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ FFmpeg –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω –≤ `PATH`.
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ Python 3.11+ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –µ–≥–æ:
   ```bash
   python -m venv .venv
   .venv\Scripts\activate      # Windows
   source .venv/bin/activate   # Linux/macOS
   ```
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
   ```bash
   copy .env.example .env   # Windows
   cp .env.example .env     # Linux/macOS
   ```
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   pip install -r requirements.txt
   ```
5. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –î–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –Ω–∞ GPU NVIDIA —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ CUDA-—Å–±–æ—Ä–∫–∏ PyTorch:
   ```bash
   pip install --upgrade --index-url https://download.pytorch.org/whl/cu121 torch torchvision torchaudio
   ```
6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã:
   ```bash
   pytest
   ```
7. –ü–æ–º–µ—Å—Ç–∏—Ç–µ –º–µ–¥–∏–∞ –≤ `video_in/` –∏–ª–∏ `audio_in/` –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
   ```bash
   python transcribe_v2.py
   ```
8. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –î–ª—è –æ—á–∏—Å—Ç–∫–∏ –∏ —É–ø–∞–∫–æ–≤–∫–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç–æ–≤ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø–æ—Å—Ç-–æ–±—Ä–∞–±–æ—Ç–∫—É:
   ```bash
   python postprocess.py
   ```

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è ‚Äî –≤ [`QUICK_START.md`](QUICK_START.md).

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
audio_in/        # –∏—Å—Ö–æ–¥–Ω—ã–µ –∞—É–¥–∏–æ—Ñ–∞–π–ª—ã
audio_out/       # –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–µ WAV 16 kHz mono
transcribe/      # —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç—ã –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã (.txt/.srt/.jsonl/_clean.md/_packed.jsonl)
video_in/        # –∏—Å—Ö–æ–¥–Ω—ã–µ –≤–∏–¥–µ–æ—Ñ–∞–π–ª—ã
tests/           # pytest-–Ω–∞–±–æ—Ä —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
transcribe_v2.py # –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –ø–∞–π–ø–ª–∞–π–Ω–∞
postprocess.py   # —á–∏—Å—Ç–∫–∞ –∏ —É–ø–∞–∫–æ–≤–∫–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç–æ–≤
.env.example     # —à–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

## ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞—É–¥–∏–æ –∏–∑ –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ FFmpeg —Å –ø–æ—Ç–æ–∫–æ–≤—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º.
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ 16‚ÄØkHz mono WAV, –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –¥–ª—è Whisper —Ñ–æ—Ä–º–∞—Ç.
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞: CUDA (float16) –∏–ª–∏ CPU (int8) —Å graceful fallback.
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `.env` (–ø—É—Ç–∏, –º–æ–¥–µ–ª—å, VAD, beam size, —á–∏—Å–ª–æ –ø–æ—Ç–æ–∫–æ–≤ –∏ –≤–æ—Ä–∫–µ—Ä–æ–≤).
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏: –∏–º–µ–Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–æ–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–µ–≥–∞–º–∏ `_video` / `_audio` –∏ –∏—Å—Ö–æ–¥–Ω—ã–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º (`meeting_video_mp4.wav`).
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `logging` + –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –±–µ–∑ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞.
- –ü—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –∞—É–¥–∏–æ –≤—ã–≤–æ–¥—è—Ç—Å—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–∫–æ–¥–µ–∫, –∫–∞–Ω–∞–ª—ã, —á–∞—Å—Ç–æ—Ç–∞, –±–∏—Ç—Ä–µ–π—Ç) –∏ –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –ø–æ—Ç–µ—Ä–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ —Ü–µ–ª–µ–≤–æ–π WAV.
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ WAV —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–µ–∫—Å—Ç–æ–≤–∞—è —Å—Ç–µ–Ω–æ–≥—Ä–∞–º–º–∞, —Å—É–±—Ç–∏—Ç—Ä—ã SRT –∏ JSONL —Å —Ç–∞–π–º–∫–æ–¥–∞–º–∏ —Å–µ–≥–º–µ–Ω—Ç–æ–≤.
- –ü–æ—Å—Ç-–æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç `*_clean.md`, `*_packed.jsonl` –∏ –æ—Ç—á—ë—Ç –ø–æ –∫–∞–∂–¥–æ–º—É —Ñ–∞–π–ª—É.

## üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–ø–∏—Å–∞–Ω—ã –≤ `.env.example`. –ö–ª—é—á–µ–≤—ã–µ –∏–∑ –Ω–∏—Ö:

- `VIDEO_IN`, `AUDIO_IN`, `AUDIO_OUT`, `TRANSCRIBE_OUT` ‚Äî –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞.
- `WHISPER_MODEL` ‚Äî —Ä–∞–∑–º–µ—Ä –º–æ–¥–µ–ª–∏ (`tiny`‚Ä¶`large-v3`).
- `WHISPER_DEVICE` ‚Äî `auto`, `cuda` –∏–ª–∏ `cpu`.
- `WHISPER_BEAM_SIZE`, `WHISPER_VAD_FILTER`, `WHISPER_VAD_MIN_SILENCE`.
- `WHISPER_CPU_THREADS` –∏ `WHISPER_NUM_WORKERS` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ CPU.
- `SKIP_FRESH_AUDIO` ‚Äî –ø—Ä–æ–ø—É—Å–∫ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–µ—Ä–µ–∫–æ–¥–∏—Ä–æ–≤–∫–∏, –µ—Å–ª–∏ WAV –Ω–µ —É—Å—Ç–∞—Ä–µ–ª.

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞:
```bash
pytest
```

–¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–º—ë–Ω —Ñ–∞–π–ª–æ–≤, –ø—Ä–æ–ø—É—Å–∫ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∏ –¥—Ä—É–≥–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏.

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

- [`README_v2.md`](README_v2.md) ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –≤—ã–≤–æ–¥–∞ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ–º –Ω–µ–ø–æ–ª–∞–¥–æ–∫.
- [`refactoring_report.md`](refactoring_report.md) ‚Äî –∂—É—Ä–Ω–∞–ª —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤.
- [`OLD/`](OLD) ‚Äî –∞—Ä—Ö–∏–≤ —Å—Ç–∞—Ä—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤.
- `postprocess.py` ‚Äî –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ `human-readme-step1.md`.

---

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –Ω—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è, —Å–æ–∑–¥–∞–π—Ç–µ issue –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é. –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Faster-Whisper Local! üòä

