# Cursor rules for FasterWhisperLocal

## Контекст проекта
- Назначение: локальная утилита для извлечения аудио из видео и транскрибирования через `faster-whisper`.
- Главный скрипт: `transcribe_v2.py` (обработка директорий `video_in/`, `audio_in/`, вывод в `audio_out/`, `transcribe/`).
- Вспомогательные материалы: `README_v2.md`, `QUICK_START.md`, временно есть `test_v2.py` (будет превращён в pytest).
- Папку `OLD/` не трогаем — это архив.

## Технологические договорённости
- Python ≥ 3.10, обязательно включаем type hints, docstrings на UTF‑8.
- Используем `faster-whisper`, `ffmpeg`, планируется подключение `.env` (python-dotenv) для конфигурации путей и модели.
- Логи — через `logging` (не `print`), сообщения двуязычные не требуются, достаточно ясного русского/английского текста.
- Все новые зависимости добавляем в `requirements.txt` (pinned версии).
- Инфраструктура тестирования — `pytest`, `mypy`, последующий GitHub Actions workflow (см. план в `refactoring_report.md`).

## Кодстайл
- PEP8 + Ruff/mypy-friendly аннотации.
- Не использовать глобальный state; оборачиваем настройки в dataclass/config.
- I/O операции (ffmpeg, Whisper) должны быть обёрнуты в отдельные сервисы, чтобы их можно было мокать в тестах.
- Никаких side-эффектов по импорту — точка входа через `if __name__ == "__main__": main()`.

## Рабочий процесс
- Перед правками смотрим `refactoring_report.md` — там приоритеты и ожидаемые шаги.
- После изменений: `pip install -r requirements.txt`, `pytest`, при необходимости `mypy`.
- Не коммитим артефакты (`audio_out`, `transcribe`, `.venv`, модели).

